class Face{constructor(){this.freset()};freset(){this.counter=0;this.kaoxv=0;this.facescalex=66;this.maxCount=111;this.isActive=!1;this.waitCounter=0;this.waitDuration=0;this.pendingStart=!1;this.lastKeyPointIndex=0;this.relativeKeyPoints=[{position:0,value:0,easing:-4,easingCu:0.24},{position:0.115,value:0.5,easing:-0.15,easingCu:0},{position:0.21,value:0.83,easing:3,easingCu:0.0},{position:0.24,value:0.54,easing:0,easingCu:0},{position:0.272,value:0.565,easing:-2.4,easingCu:0},{position:0.30,value:0.32,easing:3.5,easingCu:0},{position:0.33,value:0.56,easing:6,easingCu:0.2},{position:0.41,value:0.25,easing:-4,easingCu:0.9},{position:0.99,value:0,easing:0,easingCu:0},{position:1,value:0,easing:0,easingCu:0}];this.keyPoints=[];this.updateAbsoluteKeyPoints();this.conditionACleared=!1;this.downFrameCount=0;this.isMoving=!1;this.isDownTriggered=!1;this.wasMoving=!0};getRandomStartDelay(){return qb.rndmint(1,6)};fmotionreset(){this.downFrameCount=0;this.isDownTriggered=!1;this.wasMoving=!0};fmotionstart_pre(){if(this.isDownTriggered)return;this.isDownTriggered=!0;this.downFrameCount=0;this.wasMoving=!0;if(this.conditionACleared){this.fmotionstart()}};fmotionstart(){this.pendingStart=!0;this.isActive=!1;this.waitCounter=0;this.counter=0;this.lastKeyPointIndex=0;const newMaxCount=qb.rndmint(55,146);this.setMaxCount(newMaxCount);this.facescalex=qb.rndmint(56,145);if(this.conditionACleared){this.waitDuration=qb.rndmint(1,9)}else{this.waitDuration=this.getRandomStartDelay()}};updateAbsoluteKeyPoints(){if(!this.keyPoints.length){this.keyPoints=this.relativeKeyPoints.map(point=>({count:0,value:point.value,easing:point.easing,easingCu:point.easingCu}))};for(let i=0;i<this.relativeKeyPoints.length;i++){const point=this.relativeKeyPoints[i];this.keyPoints[i].count=Math.round(point.position*this.maxCount)}};setMaxCount(newMaxCount){this.maxCount=newMaxCount;this.updateAbsoluteKeyPoints();this.counter=this.counter%this.maxCount};applyEasing(t,easing,easingCu){if(easing===0&&easingCu===0)return t;if(t<=0)return 0;if(t>=1)return 1;let easedT=t;if(easing!==0){if(easing>0){if(easing===1){easedT=t*t}else if(easing===2){easedT=t*t*t}else if(easing===3){easedT=t*t*t*t}else{easedT=Math.pow(t,1+easing)}}else{const invT=1-t;const invEasing=1-easing;if(invEasing===1){easedT=1-invT}else if(invEasing===2){easedT=1-(invT*invT)}else if(invEasing===3){easedT=1-(invT*invT*invT)}else{easedT=1-Math.pow(invT,invEasing)}}};if(easingCu!==0){return t+(easedT-t)*(1+easingCu)};return easedT};f_test(inputData){if(inputData&&inputData.isPressed){}};fmotion(count){const len=this.keyPoints.length-1;if(count>=this.keyPoints[len].count)return this.keyPoints[len].value;if(count<=this.keyPoints[0].count)return this.keyPoints[0].value;let low=0;let high=len;let i=this.lastKeyPointIndex;if(i<len&&count>=this.keyPoints[i].count&&count<=this.keyPoints[i+1].count){}else if(count>this.keyPoints[i].count){low=i;while(low<high){const mid=Math.floor((low+high)/2);if(count>this.keyPoints[mid].count){low=mid+1}else{high=mid}};i=Math.max(0,low-1)}else{high=i;while(low<high){const mid=Math.floor((low+high)/2);if(count>this.keyPoints[mid].count){low=mid+1}else{high=mid}};i=Math.max(0,low-1)};if(i===1&&this.lastKeyPointIndex!==1){if(paperdraw){paperdraw.drawRandomDots()}};this.lastKeyPointIndex=i;const current=this.keyPoints[i];const next=this.keyPoints[i+1];const segmentLength=next.count-current.count||1;const linearProgress=(count-current.count)/segmentLength;const easedProgress=this.applyEasing(linearProgress,current.easing,current.easingCu);return current.value+(next.value-current.value)*easedProgress};fef(){if(!this.conditionACleared&&this.isDownTriggered){const isCurrentlyMoving=nnyu.isMoving;if(this.wasMoving&&!isCurrentlyMoving){this.downFrameCount=0};this.wasMoving=isCurrentlyMoving;if(!isCurrentlyMoving){this.downFrameCount++;if(this.downFrameCount>=31){this.fmotionstart();this.conditionACleared=!0;this.downFrameCount=0}}};if(this.isActive){this.counter++;if(this.counter>=this.maxCount){this.counter=0;this.isActive=!1;this.kaoxv=0;return};this.kaoxv=this.fmotion(this.counter)}else if(this.pendingStart){this.waitCounter++;if(this.waitCounter>=this.waitDuration){this.isActive=!0;this.pendingStart=!1;this.counter=0;this.lastKeyPointIndex=0}}else{this.kaoxv=0}}}